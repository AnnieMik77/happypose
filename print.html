<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>HappyPose</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">CosyPose</li><li class="chapter-item expanded "><a href="cosypose/overview-method.html"><strong aria-hidden="true">2.</strong> Overview Method</a></li><li class="chapter-item expanded "><a href="cosypose/overview-repo.html"><strong aria-hidden="true">3.</strong> Overview Repository</a></li><li class="chapter-item expanded "><a href="cosypose/download-data.html"><strong aria-hidden="true">4.</strong> Downloading and preparing the data</a></li><li class="chapter-item expanded "><a href="cosypose/test-install.html"><strong aria-hidden="true">5.</strong> Testing your installation</a></li><li class="chapter-item expanded "><a href="cosypose/evaluate.html"><strong aria-hidden="true">6.</strong> Evaluate CosyPose</a></li><li class="chapter-item expanded "><a href="cosypose/train.html"><strong aria-hidden="true">7.</strong> Train CosyPose</a></li><li class="chapter-item expanded affix "><li class="part-title">MegaPose</li><li class="chapter-item expanded "><a href="megapose/overview-method.html"><strong aria-hidden="true">8.</strong> Overview Method</a></li><li class="chapter-item expanded "><a href="megapose/overview-repo.html"><strong aria-hidden="true">9.</strong> Overview Repository</a></li><li class="chapter-item expanded "><a href="megapose/download-data.html"><strong aria-hidden="true">10.</strong> Downloading and preparing the data</a></li><li class="chapter-item expanded "><a href="megapose/test-install.html"><strong aria-hidden="true">11.</strong> Testing your installation</a></li><li class="chapter-item expanded "><a href="megapose/evaluate.html"><strong aria-hidden="true">12.</strong> Evaluate MegaPose</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">HappyPose</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="happypose"><a class="header" href="#happypose">HappyPose</a></h1>
<p><a href="https://github.com/agimus-project/happypose/actions/workflows/test.yml"><img src="https://github.com/agimus-project/happypose/actions/workflows/test.yml/badge.svg" alt="Tests" /></a>
<a href="https://github.com/agimus-project/happypose/actions/workflows/packaging.yml"><img src="https://github.com/agimus-project/happypose/actions/workflows/packaging.yml/badge.svg" alt="Packaging" /></a>
<a href="https://results.pre-commit.ci/latest/github/agimus-project/happypose/main"><img src="https://results.pre-commit.ci/badge/github/agimus-project/happypose/main.svg" alt="pre-commit.ci status" /></a>
<a href="https://happypose.readthedocs.io/en/latest/?badge=latest"><img src="https://readthedocs.org/projects/happypose/badge/?version=latest" alt="Documentation Status" /></a>
<a href="https://codecov.io/gh/agimus-project/happypose"><img src="https://codecov.io/gh/agimus-project/happypose/branch/main/graph/badge.svg?token=TODO" alt="codecov" /></a>
<a href="https://github.com/psf/black"><img src="https://img.shields.io/badge/code%20style-black-000000.svg" alt="Code style: black" /></a></p>
<p>Toolbox and trackers for object pose-estimation. Based on the work <a href="https://github.com/Simple-Robotics/cosypose">CosyPose</a> and <a href="https://github.com/megapose6d/megapose6d">MegaPose</a>. This directory is currently under development. Please refer to the <a href="https://agimus-project.github.io/happypose/">documentation</a> for more details.</p>
<h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<p>This installation procedure will be curated.</p>
<pre><code>git clone --branch dev --recurse-submodules https://github.com/agimus-project/happypose.git
cd happypose
conda env create -f environment.yml
conda activate happypose
cd happypose/pose_estimators/cosypose
pip install .
cd ../../..
pip install -e .
</code></pre>
<p>Installation of bop_toolkit :</p>
<pre><code>conda activate happypose
cd happypose/pose_estimators/megapose/deps/bop_toolkit_challenge/
# Remove all versions enforcing on requirements.txt
pip install -r requirements.txt -e .
</code></pre>
<h1 id="create-data-directory"><a class="header" href="#create-data-directory">Create data directory</a></h1>
<pre><code>Create data dir /somewhere/convenient. The dataset to store are quite large.
export HAPPYPOSE_DATA_DIR=/somewhere/convenient
</code></pre>
<h1 id="configuration-for-the-evaluation"><a class="header" href="#configuration-for-the-evaluation">Configuration for the evaluation</a></h1>
<p>If you plan on evaluating CosyPose and Megapose, you need to modify the following lines in <code>bop_toolkit_lib/config.py</code>, replace</p>
<pre><code>######## Basic ########


# Folder with the BOP datasets.
if 'BOP_PATH' in os.environ:
  datasets_path = os.environ['BOP_PATH']
else:
  datasets_path = r'/path/to/bop/datasets'

# Folder with pose results to be evaluated.
results_path = r'/path/to/folder/with/results'

# Folder for the calculated pose errors and performance scores.
eval_path = r'/path/to/eval/folder'
</code></pre>
<p>with</p>
<pre><code>######## Basic ########

# Folder with the BOP datasets.
datasets_path = str(os.environ['BOP_DATASETS_PATH'])
results_path = str(os.environ['BOP_RESULTS_PATH'])
eval_path = str(os.environ['BOP_EVAL_PATH'])
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 align="center">
CosyPose: Consistent multi-view multi-object 6D pose estimation
</h1>
<div align="center">
<h3>
<a href="http://ylabbe.github.io">Yann Labbé</a>,
<a href="https://jcarpent.github.io/">Justin Carpentier</a>,
<a href="http://imagine.enpc.fr/~aubrym/">Mathieu Aubry</a>,
<a href="http://www.di.ens.fr/~josef/">Josef Sivic</a>
<br>
<br>
ECCV: European Conference on Computer Vision, 2020
<br>
<br>
<a href="https://arxiv.org/abs/2008.08465">[Paper]</a>
<a href="https://www.di.ens.fr/willow/research/cosypose/">[Project page]</a>
<a href="https://youtu.be/4QYyEvnrC_o">[Video (1 min)]</a>
<a href="https://youtu.be/MNH_Ez7bcP0">[Video (10 min)]</a>
<a href="https://docs.google.com/presentation/d/1APHpaKKnkIvmquNJUVqERiMN4gEQ10Jt4IY7wTfIVgE/edit?usp=sharing">[Slides]</a>
<br>
<br>
Winner of the <a href="https://bop.felk.cvut.cz/challenges/bop-challenge-2020/">BOP Challenge 2020 </a> at ECCV'20 <a href="https://docs.google.com/presentation/d/1jZDu4mw-uNcwzr5jMFlqEddZsb7SjQozXVG3dT6-1M0/edit?usp=sharing">[slides]</a>  <a href="https://arxiv.org/abs/2009.07378"> [BOP challenge paper] </a>
</h3>
</div>
<h1 id="citation"><a class="header" href="#citation">Citation</a></h1>
<p>If you use this code in your research, please cite the paper:</p>
<pre><code class="language-bibtex">@inproceedings{labbe2020,
title= {CosyPose: Consistent multi-view multi-object 6D pose estimation}
author={Y. {Labbe} and J. {Carpentier} and M. {Aubry} and J. {Sivic}},
booktitle={Proceedings of the European Conference on Computer Vision (ECCV)},
year={2020}}
</code></pre>
<h1 id="news"><a class="header" href="#news">News</a></h1>
<ul>
<li>CosyPose is the winning method in the <a href="https://bop.felk.cvut.cz/challenges/">BOP challenge 2020</a> (5 awards in total, including best overall method and best RGB-only method) ! All the code and models used for the challenge are available in this repository.</li>
<li>We participate in the <a href="https://bop.felk.cvut.cz/challenges/bop-challenge-2020/">BOP challenge 2020</a>.
Results are available on the public <a href="https://bop.felk.cvut.cz/leaderboards/">leaderboard</a> for 7 pose estimation benchmarks.
We release 2D detection models (MaskRCNN) and 6D pose estimation models (coarse+refiner) used on each dataset.</li>
<li>The paper is available on arXiv and full code is released.</li>
<li>Our paper on CosyPose is accepted at ECCV 2020.</li>
</ul>
<p>This repository contains the code for the full CosyPose approach, including:</p>
<h1 id="overview"><a class="header" href="#overview">Overview</a></h1>
<h2 id="single-view-single-object-6d-pose-estimator"><a class="header" href="#single-view-single-object-6d-pose-estimator">Single-view single-object 6D pose estimator</a></h2>
<p><img src="cosypose/../../../happypose/pose_estimators/cosypose/images/example_predictions.png" alt="Single view predictions" /></p>
<p>Given an RGB image and a 2D bounding box of an object with known 3D model, the 6D pose estimator predicts the full 6D pose of the object with respect to the camera. Our method is inspired by DeepIM with several simplifications and technical improvements. It is fully implemented in pytorch and achieve single-view state-of-the-art on YCB-Video and T-LESS. We provide pre-trained models used in our experiments on both datasets. We make the training code that we used to train them available. It can be parallelized on multiple GPUs and multiple nodes.</p>
<h2 id="synthetic-data-generation"><a class="header" href="#synthetic-data-generation">Synthetic data generation</a></h2>
<p><img src="cosypose/../../../happypose/pose_estimators/cosypose/images/synthetic_images.png" alt="Synthetic images" /></p>
<p>The single-view 6D pose estimation models are trained on a mix of synthetic and real images. We provide the code for generating the additional synthetic images.</p>
<h2 id="multi-view-multi-object-scene-reconstruction"><a class="header" href="#multi-view-multi-object-scene-reconstruction">Multi-view multi-object scene reconstruction</a></h2>
<p><img src="cosypose/../../../happypose/pose_estimators/cosypose/images/multiview.png" alt="Multiview" /></p>
<p>Single-view object-level reconstruction of a scene often fails because of detection mistakes, pose estimation errors and occlusions; which makes it impractical for real applications. Our multi-view approach, CosyPose, addresses these single-view limitations and helps improving 6D pose accuracy by leveraging information from multiple cameras with unknown positions. We provide the full code, including robust object-level multi-view matching and global scene refinement. The method is agnostic to the 6D pose estimator used, and can therefore be combined with many other existing single-view object pose estimation method to solve problems on other datasets, or in real scenarios. We provide a utility for running CosyPose given a set of input 6D object candidates in each image.</p>
<h2 id="bop-challenge-2020-single-view-2d-detection--6d-pose-estimation-models"><a class="header" href="#bop-challenge-2020-single-view-2d-detection--6d-pose-estimation-models">BOP challenge 2020: single-view 2D detection + 6D pose estimation models</a></h2>
<p><img src="cosypose/../../../happypose/pose_estimators/cosypose/images/bop_datasets.png" alt="BOP" /></p>
<p>We used our {coarse+refinement} single-view 6D pose estimation method in the <a href="https://bop.felk.cvut.cz/challenges/bop-challenge-2020/">BOP challenge 2020</a>. In addition, we trained a MaskRCNN detector (torchvision's implementation) on each of the 7 core datasets (LM-O, T-LESS, TUD-L, IC-BIN, ITODD, HB, YCB-V). We provide 2D detectors and 6D pose estimation models for these datasets. All training (including 2D detector), inference and evaluation code are available in this repository. It can be easily used for another dataset in the BOP format.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="main-entry-points"><a class="header" href="#main-entry-points">Main entry points</a></h1>
<p>This repository is divided into different entry points</p>
<ul>
<li><a href="cosypose/./test-install.html">Inference</a>: <code>run_cosypose_on_example.py</code> is used to run the inference pipeline on a single example image. </li>
<li><a href="cosypose/./evaluate.html">Evaluation</a>: ̀<code>run_full_cosypose_evaluation.py</code> is ued to first run inference on one or several datasets, and then use the results obtained to evaluate the method on these datasets. </li>
<li><a href="cosypose/./train.html">Training</a>: <code>run_detector_training.py</code> is used to train the detector part of Cosypose.<code>run_pose_training.py</code> can be used to train the <code>coarse</code> model or the <code>refiner</code> model.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="downloading-and-preparing-the-data"><a class="header" href="#downloading-and-preparing-the-data">Downloading and preparing the data</a></h1>
<p>All data used (datasets, models, results, ...) are stored in a directory <code>$MEGAPOSE_DATA_DIR</code> that you created in the Readsme. We provide the utilities for downloading required data and models. All of the files can also be <a href="https://www.paris.inria.fr/archive_ylabbeprojectsdata/">downloaded manually</a>.</p>
<h2 id="bop-datasets"><a class="header" href="#bop-datasets">BOP Datasets</a></h2>
<p>For both T-LESS and YCB-Video, we use the datasets in the <a href="https://bop.felk.cvut.cz/datasets/">BOP format</a>. If you already have them on your disk, place them in <code>$MEGAPOSE_DATA_DIR/bop_datasets</code>. Alternatively, you can download it using :</p>
<pre><code class="language-sh">python -m happypose.toolbox.utils.download --bop_dataset=ycbv
python -m happypose.toolbox.utils.download --bop_dataset=tless
</code></pre>
<p>Additional files that contain information about the datasets used to fairly compare with prior works on both datasets.</p>
<pre><code class="language-sh">python -m happypose.toolbox.utils.download --bop_extra_files=ycbv
python -m happypose.toolbox.utils.download --bop_extra_files=tless
</code></pre>
<p>We use <a href="https://pybullet.org/wordpress/">pybullet</a> for rendering images which requires object models to be provided in the URDF format. We provide converted URDF files, they can be downloaded using:</p>
<pre><code class="language-sh">python -m happypose.toolbox.utils.download --urdf_models=ycbv
python -m happypose.toolbox.utils.download --urdf_models=tless.cad
</code></pre>
<p>In the BOP format, the YCB objects <code>002_master_chef_can</code> and <code>040_large_marker</code> are considered symmetric, but not by previous works such as PoseCNN, PVNet and DeepIM. To ensure a fair comparison (using ADD instead of ADD-S for ADD-(S) for these objects), these objects must <em>not</em> be considered symmetric in the evaluation. To keep the uniformity of the models format, we generate a set of YCB objects <code>models_bop-compat_eval</code> that can be used to fairly compare our approach against previous works. You can download them directly:</p>
<pre><code class="language-sh">python -m happypose.toolbox.utils.download --ycbv_compat_models
</code></pre>
<p>Notes:</p>
<ul>
<li>
<p>The URDF files were obtained using these commands (requires <code>meshlab</code> to be installed):</p>
<pre><code class="language-sh">python -m happypose.pose_estimators.cosypose.cosypose.scripts.convert_models_to_urdf --models=ycbv
python -m happypose.pose_estimators.cosypose.cosypose.scripts.convert_models_to_urdf --models=tless.cad
</code></pre>
</li>
<li>
<p>Compatibility models were obtained using the following script:</p>
<pre><code class="language-sh">python -m happypose.pose_estimators.cosypose.cosypose.scripts.make_ycbv_compat_models
</code></pre>
</li>
</ul>
<h2 id="models-for-minimal-version"><a class="header" href="#models-for-minimal-version">Models for minimal version</a></h2>
<pre><code class="language-sh"> #ycbv
  python -m happypose.toolbox.utils.download --cosypose_model=detector-bop-ycbv-pbr--970850
  python -m happypose.toolbox.utils.download --cosypose_model=coarse-bop-ycbv-pbr--724183
  python -m happypose.toolbox.utils.download --cosypose_model=refiner-bop-ycbv-pbr--604090

 #tless
  python -m happypose.toolbox.utils.download --cosypose_model=detector-bop-tless-pbr--873074
  python -m happypose.toolbox.utils.download --cosypose_model=coarse-bop-tless-pbr--506801
  python -m happypose.toolbox.utils.download --cosypose_model=refiner-bop-tless-pbr--233420
</code></pre>
<h2 id="pre-trained-models-for-single-view-estimator"><a class="header" href="#pre-trained-models-for-single-view-estimator">Pre-trained models for single-view estimator</a></h2>
<p>The pre-trained models of the single-view pose estimator can be downloaded using:</p>
<pre><code class="language-sh"># YCB-V Single-view refiner
python -m happypose.toolbox.utils.download --cosypose_model=ycbv-refiner-finetune--251020

# YCB-V Single-view refiner trained on synthetic data only
# Only download this if you are interested in retraining the above model
python -m happypose.toolbox.utils.download --cosypose_model=ycbv-refiner-syntonly--596719

# T-LESS coarse and refiner models
python -m happypose.toolbox.utils.download --cosypose_model=tless-coarse--10219
python -m happypose.toolbox.utils.download --cosypose_model=tless-refiner--585928
</code></pre>
<h2 id="2d-detections"><a class="header" href="#2d-detections">2D detections</a></h2>
<p>To ensure a fair comparison with prior works on both datasets, we use the same detections as DeepIM (from PoseCNN) on YCB-Video and the same as Pix2pose (from a RetinaNet model) on T-LESS. Download the saved 2D detections for both datasets using</p>
<pre><code class="language-sh">python -m happypose.toolbox.utils.download --detections=ycbv_posecnn

# SiSo detections: 1 detection with highest per score per class per image on all images
# Available for each image of the T-LESS dataset (primesense sensor)
# These are the same detections as used in Pix2pose's experiments
python -m happypose.toolbox.utils.download --detections=tless_pix2pose_retinanet_siso_top1

# ViVo detections: All detections for a subset of 1000 images of T-LESS.
# Used in our multi-view experiments.
python -m happypose.toolbox.utils.download --detections=tless_pix2pose_retinanet_vivo_all
</code></pre>
<p>If you are interested in re-training a detector, please see the BOP 2020 section.</p>
<p>Notes:</p>
<ul>
<li>The PoseCNN detections (and coarse pose estimates) on YCB-Video were extracted and converted from <a href="https://github.com/yuxng/YCB_Video_toolbox/blob/master/results_PoseCNN_RSS2018.zip">these PoseCNN results</a>.</li>
<li>The Pix2pose detections were extracted using <a href="https://github.com/kirumang/Pix2Pose">pix2pose's</a> code. We used the detection model from their paper, see <a href="https://github.com/kirumang/Pix2Pose#download-pre-trained-weights">here</a>. For the ViVo detections, their code was slightly modified. The code used to extract detections can be found <a href="https://github.com/ylabbe/pix2pose_cosypose">here</a>.</li>
</ul>
</details><div style="break-before: page; page-break-before: always;"></div><h1 id="testing-your-installation"><a class="header" href="#testing-your-installation">Testing your installation</a></h1>
<h2 id="download-pre-trained-pose-estimation-models"><a class="header" href="#download-pre-trained-pose-estimation-models">Download pre-trained pose estimation models</a></h2>
<pre><code class="language-sh"> #ycbv
  python -m happypose.toolbox.utils.download --cosypose_model=detector-bop-ycbv-pbr--970850
  python -m happypose.toolbox.utils.download --cosypose_model=coarse-bop-ycbv-pbr--724183
  python -m happypose.toolbox.utils.download --cosypose_model=refiner-bop-ycbv-pbr--604090

 #tless
  python -m happypose.toolbox.utils.download --cosypose_model=detector-bop-tless-pbr--873074
  python -m happypose.toolbox.utils.download --cosypose_model=coarse-bop-tless-pbr--506801
  python -m happypose.toolbox.utils.download --cosypose_model=refiner-bop-tless-pbr--233420
</code></pre>
<h2 id="2-run-examples"><a class="header" href="#2-run-examples">2. Run examples</a></h2>
<p>You need to download the ycbv dataset to run this example. Please see the download section.</p>
<pre><code>python -m happypose.pose_estimators.cosypose.cosypose.scripts.run_inference_on_example crackers --run-inference
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="evaluating-cosypose"><a class="header" href="#evaluating-cosypose">Evaluating CosyPose</a></h1>
<p>Please make sure you followed the steps relative to the evaluation in the main readme.</p>
<p>This needs to be adapted (SO3_grid not used for CosyPose)</p>
<pre><code>python -m happypose.pose_estimators.cosypose.cosypose.scripts.run_full_cosypose_eval_new detector_run_id=bop_pbr coarse_run_id=coarse-bop-ycbv-pbr--724183 refiner_run_id=refiner-bop-ycbv-pbr--604090 ds_names=[&quot;ycbv.bop19&quot;] result_id=ycbv-debug detection_coarse_types=[[&quot;detector&quot;,&quot;S03_grid&quot;]]
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="train-cosypose"><a class="header" href="#train-cosypose">Train CosyPose</a></h1>
<h2 id="training-pose-estimator"><a class="header" href="#training-pose-estimator">Training Pose Estimator</a></h2>
<p>Example</p>
<pre><code>python -m happypose.pose_estimators.cosypose.cosypose.scripts.run_pose_training --config ycbv-refiner-syntonly
</code></pre>
<h2 id="training-detector"><a class="header" href="#training-detector">Training Detector</a></h2>
<pre><code>python -m happypose.pose_estimators.cosypose.cosypose.scripts.run_detector_training --config bop-ycbv-synt+real
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="overview-method"><a class="header" href="#overview-method">Overview Method</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="overview-repository"><a class="header" href="#overview-repository">Overview Repository</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="download-example-data-for-minimal-testing"><a class="header" href="#download-example-data-for-minimal-testing">Download example data for minimal testing</a></h1>
<pre><code>cd $MEGAPOSE_DATA_DIR
wget https://memmo-data.laas.fr/static/examples.tar.xz
tar xf examples.tar.xz
</code></pre>
<h1 id="download-pre-trained-pose-estimation-models-1"><a class="header" href="#download-pre-trained-pose-estimation-models-1">Download pre-trained pose estimation models</a></h1>
<p>Download pose estimation models to $MEGAPOSE_DATA_DIR/megapose-models:</p>
<pre><code>python -m happypose.toolbox.utils.download --megapose_models
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="testing-your-installation-1"><a class="header" href="#testing-your-installation-1">Testing your installation</a></h1>
<p>Make sur to <a href="megapose/(download-data.html">download</a> the data and models before running this script.</p>
<h2 id="run-examples"><a class="header" href="#run-examples">Run examples</a></h2>
<pre><code>python -m happypose.pose_estimators.megapose.src.megapose.scripts.run_inference_on_example barbecue-sauce --run-inference --vis-outputs
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="evaluating-megapose"><a class="header" href="#evaluating-megapose">Evaluating Megapose</a></h1>
<p>Please make sure you followed the steps relative to the evaluation in the main readme.</p>
<p>An example to run the evaluation on <code>YCBV</code> dataset. Several datasets can be added to the list.</p>
<pre><code>python -m happypose.pose_estimators.megapose.src.megapose.scripts.run_full_megapose_eval detector_run_id=bop_pbr coarse_run_id=coarse-rgb-906902141 refiner_run_id=refiner-rgb-653307694 ds_names=[ycbv.bop19] result_id=fastsam_kbestdet_1posehyp detection_coarse_types=[[&quot;sam&quot;,&quot;SO3_grid&quot;]] inference.n_pose_hypotheses=1 skip_inference=true run_bop_eval=true
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
